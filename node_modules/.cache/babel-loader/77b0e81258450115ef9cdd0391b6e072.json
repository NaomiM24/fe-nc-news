{"ast":null,"code":"import _classCallCheck from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import*as api from'../api';var CommentVotesChange=/*#__PURE__*/function(_Component){_inherits(CommentVotesChange,_Component);function CommentVotesChange(){var _getPrototypeOf2;var _this;_classCallCheck(this,CommentVotesChange);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CommentVotesChange)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={vote:0,inputsDisabled:true,error:{status:null,msg:''}};_this.handleClick=function(event){_this.setState({vote:event.target.value});};return _this;}_createClass(CommentVotesChange,[{key:\"render\",value:function render(){var _this$state$error=this.state.error,status=_this$state$error.status,msg=_this$state$error.msg;return React.createElement(\"div\",null,\"votes: \",this.props.comment_vote+ +this.state.vote,React.createElement(\"br\",null),React.createElement(\"button\",{className:\"like\",value:\"1\",onClick:this.handleClick,disabled:this.state.vote===1?true:false},\"Like\"),React.createElement(\"button\",{className:\"dislike\",value:\"-1\",onClick:this.handleClick,disabled:this.state.vote===-1?true:false},\"Dislike\"),React.createElement(\"button\",{className:\"cancelVote\",value:\"0\",onClick:this.handleClick,disabled:this.state.vote===0?true:false},\"Cancel Vote\"),this.state.error.status!==null&&React.createElement(\"p\",null,\"Error \",status,\"! \",msg));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this2=this;var comment_id=this.props.comment_id;if(+this.state.vote===0&&+prevState.vote!==0){var vote=-+prevState.vote;api.updateCommentVotes(comment_id,vote).catch(function(error){return _this2.setState({vote:0,error:{status:500,msg:\"cancel vote did not work at this time, please try again later\"}});});}else if(prevState.vote!==this.state.vote){var _vote=this.state.vote;api.updateCommentVotes(comment_id,_vote).catch(function(error){_this2.setState({vote:0,error:{status:500,msg:'voting did not work, please try again later'}});});}}}]);return CommentVotesChange;}(Component);export default CommentVotesChange;","map":{"version":3,"sources":["/home/anatd/Naomi/northcoders/week9/fe-nc-news/src/components.js/CommentVotesChange.jsx"],"names":["React","Component","api","CommentVotesChange","state","vote","inputsDisabled","error","status","msg","handleClick","event","setState","target","value","props","comment_vote","prevProps","prevState","comment_id","updateCommentVotes","catch"],"mappings":"mpBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,QAArB,C,GAEMC,CAAAA,kB,+aAEJC,K,CAAQ,CACNC,IAAI,CAAE,CADA,CAENC,cAAc,CAAE,IAFV,CAGNC,KAAK,CAAE,CACLC,MAAM,CAAE,IADH,CAELC,GAAG,CAAE,EAFA,CAHD,C,OAgCRC,W,CAAc,SAACC,KAAD,CAAW,CACvB,MAAKC,QAAL,CAAc,CAACP,IAAI,CAAEM,KAAK,CAACE,MAAN,CAAaC,KAApB,CAAd,EACD,C,qFAzBQ,uBAEe,KAAKV,KAAL,CAAWG,KAF1B,CAEAC,MAFA,mBAEAA,MAFA,CAEQC,GAFR,mBAEQA,GAFR,CAIP,MACE,0CACW,KAAKM,KAAL,CAAWC,YAAX,CAA0B,EAAC,KAAKZ,KAAL,CAAWC,IADjD,CAEG,8BAFH,CAGM,8BAAQ,SAAS,CAAC,MAAlB,CAAyB,KAAK,CAAC,GAA/B,CAAmC,OAAO,CAAE,KAAKK,WAAjD,CAA8D,QAAQ,CAAG,KAAKN,KAAL,CAAWC,IAAX,GAAkB,CAAlB,CAAsB,IAAtB,CAA6B,KAAtG,SAHN,CAMM,8BAAQ,SAAS,CAAC,SAAlB,CAA4B,KAAK,CAAC,IAAlC,CAAuC,OAAO,CAAE,KAAKK,WAArD,CAAkE,QAAQ,CAAG,KAAKN,KAAL,CAAWC,IAAX,GAAkB,CAAC,CAAnB,CAAuB,IAAvB,CAA8B,KAA3G,YANN,CASM,8BAAQ,SAAS,CAAC,YAAlB,CAA+B,KAAK,CAAC,GAArC,CAAyC,OAAO,CAAE,KAAKK,WAAvD,CAAoE,QAAQ,CAAG,KAAKN,KAAL,CAAWC,IAAX,GAAkB,CAAlB,CAAsB,IAAtB,CAA6B,KAA5G,gBATN,CAYQ,KAAKD,KAAL,CAAWG,KAAX,CAAiBC,MAAjB,GAA4B,IAA7B,EAAsC,sCAAUA,MAAV,MAAoBC,GAApB,CAZ7C,CADF,CAgBD,C,8DAOkBQ,S,CAAWC,S,CAAW,oBAC/BC,CAAAA,UAD+B,CAChB,KAAKJ,KADW,CAC/BI,UAD+B,CAEvC,GAAI,CAAC,KAAKf,KAAL,CAAWC,IAAZ,GAAqB,CAArB,EAA0B,CAACa,SAAS,CAACb,IAAX,GAAoB,CAAlD,CAAoD,CAClD,GAAMA,CAAAA,IAAI,CAAG,CAAE,CAACa,SAAS,CAACb,IAA1B,CACAH,GAAG,CAACkB,kBAAJ,CAAuBD,UAAvB,CAAmCd,IAAnC,EAAyCgB,KAAzC,CAA+C,SAAAd,KAAK,CAAI,CACtD,MAAO,CAAA,MAAI,CAACK,QAAL,CAAc,CACnBP,IAAI,CAAE,CADa,CAEnBE,KAAK,CAAE,CACLC,MAAM,CAAE,GADH,CAELC,GAAG,CAAE,+DAFA,CAFY,CAAd,CAAP,CAOD,CARD,EASD,CAXD,IAYK,IAAIS,SAAS,CAACb,IAAV,GAAmB,KAAKD,KAAL,CAAWC,IAAlC,CAAuC,IAEnCA,CAAAA,KAFmC,CAE3B,KAAKD,KAFsB,CAEnCC,IAFmC,CAG1CH,GAAG,CAACkB,kBAAJ,CAAuBD,UAAvB,CAAmCd,KAAnC,EACCgB,KADD,CACO,SAAAd,KAAK,CAAI,CACd,MAAI,CAACK,QAAL,CAAc,CAACP,IAAI,CAAE,CAAP,CAAUE,KAAK,CAAC,CAACC,MAAM,CAAE,GAAT,CAAcC,GAAG,CAAE,6CAAnB,CAAhB,CAAd,EACD,CAHD,EAID,CACF,C,gCA5D8BR,S,EA+DjC,cAAeE,CAAAA,kBAAf","sourcesContent":["import React, { Component } from 'react';\nimport * as api from '../api'\n\nclass CommentVotesChange extends Component {\n\n  state = {\n    vote: 0,\n    inputsDisabled: true,\n    error: {\n      status: null,\n      msg: '',\n    },\n  }\n\n  render() {\n \n    const {status, msg} = this.state.error\n \n    return (\n      <div>\n         votes: {this.props.comment_vote + +this.state.vote}\n         <br/>\n            <button className=\"like\" value='1' onClick={this.handleClick} disabled={ this.state.vote===1 ? true : false}>\n             Like\n            </button>        \n            <button className=\"dislike\" value=\"-1\" onClick={this.handleClick} disabled={ this.state.vote===-1 ? true : false}>\n                 Dislike\n            </button>\n            <button className=\"cancelVote\" value=\"0\" onClick={this.handleClick} disabled={ this.state.vote===0 ? true : false}>\n              Cancel Vote\n            </button>\n            {(this.state.error.status !== null) && <p>Error {status}! {msg}</p>} \n      </div>\n    );\n  }\n\n\n  handleClick = (event) => {\n    this.setState({vote: event.target.value})\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { comment_id } = this.props;\n    if (+this.state.vote === 0 && +prevState.vote !== 0){\n      const vote = -(+prevState.vote)\n      api.updateCommentVotes(comment_id, vote).catch(error => {\n        return this.setState({\n          vote: 0,\n          error: {\n            status: 500,\n            msg: \"cancel vote did not work at this time, please try again later\"\n          }\n        });\n      });\n    }\n    else if (prevState.vote !== this.state.vote){\n\n      const {vote} = this.state\n      api.updateCommentVotes(comment_id, vote) \n      .catch(error => {\n        this.setState({vote: 0, error:{status: 500, msg: 'voting did not work, please try again later'}})\n      })       \n    }\n  }\n}\n\nexport default CommentVotesChange;"]},"metadata":{},"sourceType":"module"}