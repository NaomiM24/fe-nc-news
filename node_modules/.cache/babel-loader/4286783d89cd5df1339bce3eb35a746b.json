{"ast":null,"code":"var _jsxFileName = \"/home/anatd/Naomi/northcoders/week9/fe-nc-news/src/components.js/ArticleVotesChange.jsx\";\nimport React, { Component } from 'react';\nimport * as api from '../api';\nimport ErrorPage from './ErrorPage';\n\nclass ArticleVotesChange extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      vote: 0,\n      error: {\n        status: null,\n        msg: ''\n      }\n    };\n\n    this.handleLike = () => {\n      this.setState({\n        vote: 1\n      });\n    };\n\n    this.handleDislike = () => {\n      this.setState({\n        vote: -1\n      });\n    };\n  }\n\n  render() {\n    const _this$state$error = this.state.error,\n          status = _this$state$error.status,\n          msg = _this$state$error.msg;\n\n    if (this.state.error.status !== null) {\n      return React.createElement(ErrorPage, {\n        status: status,\n        msg: msg,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 16\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19\n      },\n      __self: this\n    }, \"votes: \", this.props.article_vote + this.state.vote, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"like\",\n      onClick: this.handleLike,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22\n      },\n      __self: this\n    }, \"Like\"), React.createElement(\"button\", {\n      className: \"dislike\",\n      onClick: this.handleDislike,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25\n      },\n      __self: this\n    }, \"Dislike\"), this.state.error.status !== null && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }, \"Error\"));\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.vote !== this.state.vote) {\n      const article_id = this.props.article_id;\n      const vote = this.state.vote;\n      api.updateArticleVotes(article_id, vote).catch(error => {\n        //const {status, msg} = error\n        this.setState({\n          status: 500,\n          msg: 'voting did not work, please try again later'\n        });\n      });\n    }\n  }\n\n}\n\nexport default ArticleVotesChange;","map":{"version":3,"sources":["/home/anatd/Naomi/northcoders/week9/fe-nc-news/src/components.js/ArticleVotesChange.jsx"],"names":["React","Component","api","ErrorPage","ArticleVotesChange","state","vote","error","status","msg","handleLike","setState","handleDislike","render","props","article_vote","componentDidUpdate","prevProps","prevState","article_id","updateArticleVotes","catch"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,KAAKC,GAAZ,MAAqB,QAArB;AACA,OAAOC,SAAP,MAAsB,aAAtB;;AAEA,MAAMC,kBAAN,SAAiCH,SAAjC,CAA2C;AAAA;AAAA;AAAA,SACzCI,KADyC,GACjC;AACNC,MAAAA,IAAI,EAAE,CADA;AAENC,MAAAA,KAAK,EAAE;AACLC,QAAAA,MAAM,EAAE,IADH;AAELC,QAAAA,GAAG,EAAE;AAFA;AAFD,KADiC;;AAAA,SA4BzCC,UA5ByC,GA4B5B,MAAK;AAChB,WAAKC,QAAL,CAAc;AAACL,QAAAA,IAAI,EAAE;AAAP,OAAd;AACD,KA9BwC;;AAAA,SAgCzCM,aAhCyC,GAgCzB,MAAM;AACpB,WAAKD,QAAL,CAAc;AAACL,QAAAA,IAAI,EAAE,CAAC;AAAR,OAAd;AACD,KAlCwC;AAAA;;AAQzCO,EAAAA,MAAM,GAAG;AAAA,8BACe,KAAKR,KAAL,CAAWE,KAD1B;AAAA,UACAC,MADA,qBACAA,MADA;AAAA,UACQC,GADR,qBACQA,GADR;;AAEP,QAAI,KAAKJ,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,KAA4B,IAAhC,EAAqC;AACpC,aAAO,oBAAC,SAAD;AAAW,QAAA,MAAM,EAAEA,MAAnB;AAA2B,QAAA,GAAG,EAAEC,GAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACA;;AACD,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACU,KAAKK,KAAL,CAAWC,YAAX,GAA0B,KAAKV,KAAL,CAAWC,IAD/C,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGM;AAAQ,MAAA,SAAS,EAAC,MAAlB;AAAyB,MAAA,OAAO,EAAE,KAAKI,UAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHN,EAMM;AAAQ,MAAA,SAAS,EAAC,SAAlB;AAA4B,MAAA,OAAO,EAAE,KAAKE,aAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBANN,EAUQ,KAAKP,KAAL,CAAWE,KAAX,CAAiBC,MAAjB,KAA4B,IAA7B,IAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAV7C,CADF;AAcD;;AASDQ,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AACvC,QAAIA,SAAS,CAACZ,IAAV,KAAmB,KAAKD,KAAL,CAAWC,IAAlC,EAAuC;AAAA,YAC9Ba,UAD8B,GAChB,KAAKL,KADW,CAC9BK,UAD8B;AAAA,YAE9Bb,IAF8B,GAEtB,KAAKD,KAFiB,CAE9BC,IAF8B;AAGrCJ,MAAAA,GAAG,CAACkB,kBAAJ,CAAuBD,UAAvB,EAAmCb,IAAnC,EAAyCe,KAAzC,CAA+Cd,KAAK,IAAI;AACtD;AACA,aAAKI,QAAL,CAAc;AAACH,UAAAA,MAAM,EAAE,GAAT;AAAcC,UAAAA,GAAG,EAAE;AAAnB,SAAd;AACD,OAHD;AAID;AACF;;AA7CwC;;AAgD3C,eAAeL,kBAAf","sourcesContent":["import React, { Component } from 'react';\nimport * as api from '../api'\nimport ErrorPage from './ErrorPage';\n\nclass ArticleVotesChange extends Component {\n  state = {\n    vote: 0,\n    error: {\n      status: null,\n      msg: '',\n    },\n  }\n  render() {\n    const {status, msg} = this.state.error\n    if (this.state.error.status !== null){\n     return <ErrorPage status={status} msg={msg}  />\n    }\n    return (\n      <div>\n        votes: {this.props.article_vote + this.state.vote}\n        <br/>\n            <button className=\"like\" onClick={this.handleLike}>\n              Like\n            </button>\n            <button className=\"dislike\" onClick={this.handleDislike}>\n              Dislike\n            </button>\n         \n            {(this.state.error.status !== null) && <p>Error</p>}\n      </div>\n    );\n  }\n  handleLike = ()=> {\n    this.setState({vote: 1})\n  }\n\n  handleDislike = () => {\n    this.setState({vote: -1})\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.vote !== this.state.vote){\n      const {article_id} = this.props\n      const {vote} = this.state\n      api.updateArticleVotes(article_id, vote).catch(error => {\n        //const {status, msg} = error\n        this.setState({status: 500, msg: 'voting did not work, please try again later'})\n      })        \n    }\n  }\n}\n\nexport default ArticleVotesChange;"]},"metadata":{},"sourceType":"module"}