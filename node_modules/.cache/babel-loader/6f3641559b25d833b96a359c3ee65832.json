{"ast":null,"code":"var _jsxFileName = \"/home/anatd/Naomi/northcoders/week9/fe-nc-news/src/components.js/CommentVotesChange.jsx\";\nimport React, { Component } from 'react';\nimport * as api from '../api';\n\nclass CommentVotesChange extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      vote: 0,\n      inputsDisabled: true,\n      error: {\n        status: null,\n        msg: ''\n      }\n    };\n\n    this.handleClick = event => {\n      this.setState({\n        vote: event.target.value\n      });\n    };\n  }\n\n  render() {\n    const _this$state$error = this.state.error,\n          status = _this$state$error.status,\n          msg = _this$state$error.msg;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20\n      },\n      __self: this\n    }, \"votes: \", this.props.comment_vote + +this.state.vote, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"like\",\n      value: \"1\",\n      onClick: this.handleClick,\n      disabled: this.state.vote === 1 ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 23\n      },\n      __self: this\n    }, \"Like\"), React.createElement(\"button\", {\n      className: \"dislike\",\n      value: \"-1\",\n      onClick: this.handleClick,\n      disabled: this.state.vote === -1 ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26\n      },\n      __self: this\n    }, \"Dislike\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"cancelVote\",\n      value: \"0\",\n      onClick: this.handleClick,\n      disabled: this.state.vote === 0 ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }, \"Cancel Vote\"), this.state.error.status !== null && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }, \"Error \", status, \"! \", msg));\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (+this.state.vote === 0 && +prevState.vote !== 0) {\n      const article_id = this.props.article_id;\n      const vote = -+prevState.vote;\n      api.updateCommentVotes(article_id, vote).catch(error => {\n        return this.setState({\n          vote: 0,\n          error: {\n            status: 500,\n            msg: \"voting did not work, please try again later\"\n          }\n        });\n      });\n    } else if (prevState.vote !== this.state.vote) {\n      const comment_id = this.props.comment_id;\n      const vote = this.state.vote;\n      api.updateCommentVotes(comment_id, vote).catch(error => {\n        this.setState({\n          vote: 0,\n          error: {\n            status: 500,\n            msg: 'voting did not work, please try again later'\n          }\n        });\n      });\n    }\n  }\n\n}\n\nexport default CommentVotesChange;","map":{"version":3,"sources":["/home/anatd/Naomi/northcoders/week9/fe-nc-news/src/components.js/CommentVotesChange.jsx"],"names":["React","Component","api","CommentVotesChange","state","vote","inputsDisabled","error","status","msg","handleClick","event","setState","target","value","render","props","comment_vote","componentDidUpdate","prevProps","prevState","article_id","updateCommentVotes","catch","comment_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as api from '../api'\n\nclass CommentVotesChange extends Component {\n\n  state = {\n    vote: 0,\n    inputsDisabled: true,\n    error: {\n      status: null,\n      msg: '',\n    },\n  }\n\n  render() {\n \n    const {status, msg} = this.state.error\n \n    return (\n      <div>\n         votes: {this.props.comment_vote + +this.state.vote}\n         <br/>\n            <button className=\"like\" value='1' onClick={this.handleClick} disabled={ this.state.vote===1 ? true : false}>\n             Like\n            </button>        \n            <button className=\"dislike\" value=\"-1\" onClick={this.handleClick} disabled={ this.state.vote===-1 ? true : false}>\n                 Dislike\n            </button><br/>\n            <button className=\"cancelVote\" value=\"0\" onClick={this.handleClick} disabled={ this.state.vote===0 ? true : false}>\n              Cancel Vote\n            </button>\n            {(this.state.error.status !== null) && <p>Error {status}! {msg}</p>} \n      </div>\n    );\n  }\n\n\n  handleClick = (event) => {\n    this.setState({vote: event.target.value})\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (+this.state.vote === 0 && +prevState.vote !== 0){\n      const { article_id } = this.props;\n      const vote = -(+prevState.vote)\n      api.updateCommentVotes(article_id, vote).catch(error => {\n        return this.setState({\n          vote: 0,\n          error: {\n            status: 500,\n            msg: \"voting did not work, please try again later\"\n          }\n        });\n      });\n    }\n    else if (prevState.vote !== this.state.vote){\n      const {comment_id} = this.props\n      const {vote} = this.state\n      api.updateCommentVotes(comment_id, vote) \n      .catch(error => {\n        this.setState({vote: 0, error:{status: 500, msg: 'voting did not work, please try again later'}})\n      })       \n    }\n  }\n}\n\nexport default CommentVotesChange;"]},"metadata":{},"sourceType":"module"}