{"ast":null,"code":"var _jsxFileName = \"/home/anatd/Naomi/northcoders/week9/fe-nc-news/src/components.js/ArticleVotesChange.jsx\";\nimport React, { Component } from \"react\";\nimport * as api from \"../api\";\n\nclass ArticleVotesChange extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      vote: 0,\n      error: {\n        status: null,\n        msg: \"\"\n      }\n    };\n\n    this.handleClick = event => {\n      this.setState({\n        vote: event.target.value\n      });\n    };\n  }\n\n  render() {\n    const _this$state$error = this.state.error,\n          status = _this$state$error.status,\n          msg = _this$state$error.msg;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17\n      },\n      __self: this\n    }, \"votes: \", this.props.article_vote + +this.state.vote, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"like\",\n      value: 1,\n      onClick: this.handleClick,\n      disabled: this.state.vote === 1 ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20\n      },\n      __self: this\n    }, \"Like\"), React.createElement(\"button\", {\n      className: \"dislike\",\n      value: -1,\n      onClick: this.handleClick,\n      disabled: this.state.vote === -1 ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29\n      },\n      __self: this\n    }, \"Dislike\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      className: \"cancel\",\n      value: 0,\n      onClick: this.handleClick,\n      disabled: this.state.vote === 0 ? true : false,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, \"Cancel Vote\"), status !== null && React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, \"Error \", status, \"! \", msg));\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (+this.state.vote === 0 && +prevState.vote !== 0) {\n      const article_id = this.props.article_id;\n      const vote = +prevState.vote;\n      console.log(vote); //console.log(prevState.vote)\n\n      api.updateArticleVotes(article_id, -vote).catch(error => {\n        return this.setState({\n          vote: 0,\n          error: {\n            status: 500,\n            msg: \"voting did not work, please try again later\"\n          }\n        });\n      });\n    } else if (prevState.vote !== this.state.vote) {\n      // console.log(this.state.vote)\n      // console.log('prev', prevState.vote, \"this\", this.state.vote);\n      const article_id = this.props.article_id;\n      const vote = this.state.vote;\n      api.updateArticleVotes(article_id, vote).catch(error => {\n        return this.setState({\n          vote: 0,\n          error: {\n            status: 500,\n            msg: \"voting did not work, please try again later\"\n          }\n        });\n      });\n    }\n  }\n\n}\n\nexport default ArticleVotesChange;","map":{"version":3,"sources":["/home/anatd/Naomi/northcoders/week9/fe-nc-news/src/components.js/ArticleVotesChange.jsx"],"names":["React","Component","api","ArticleVotesChange","state","vote","error","status","msg","handleClick","event","setState","target","value","render","props","article_vote","componentDidUpdate","prevProps","prevState","article_id","console","log","updateArticleVotes","catch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport * as api from \"../api\";\n\n\nclass ArticleVotesChange extends Component {\n  state = {\n    vote: 0,\n    error: {\n      status: null,\n      msg: \"\"\n    }\n  };\n  render() {\n    const { status, msg } = this.state.error;\n\n    return (\n      <div>\n        votes: {this.props.article_vote + +this.state.vote}\n        <br />\n        <button\n          className=\"like\"\n          value={1}\n          onClick={this.handleClick}\n          disabled={this.state.vote === 1 ? true : false}\n        >\n          Like\n          \n        </button>\n        <button\n          className=\"dislike\"\n          value={-1}\n          onClick={this.handleClick}\n          disabled={this.state.vote === -1 ? true : false}\n        >\n          Dislike\n        </button>\n        <br />\n        <button\n          className=\"cancel\"\n          value={0}\n          onClick={this.handleClick}\n          disabled={this.state.vote === 0 ? true : false}\n        >\n          Cancel Vote\n        </button>\n        {status !== null && (\n          <p>\n            Error {status}! {msg}\n          </p>\n        )}\n      </div>\n    );\n  }\n\n  handleClick = event => {\n    this.setState({ vote: event.target.value });\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (+this.state.vote === 0 && +prevState.vote !== 0){\n      const { article_id } = this.props;\n      const vote = +prevState.vote\n      console.log(vote)\n      //console.log(prevState.vote)\n      api.updateArticleVotes(article_id, -vote).catch(error => {\n        return this.setState({\n          vote: 0,\n          error: {\n            status: 500,\n            msg: \"voting did not work, please try again later\"\n          }\n        });\n      });\n    }\n  \n    else if (prevState.vote !== this.state.vote) {\n      // console.log(this.state.vote)\n      // console.log('prev', prevState.vote, \"this\", this.state.vote);\n      const { article_id } = this.props;\n      const { vote } = this.state;\n      api.updateArticleVotes(article_id, vote).catch(error => {\n        return this.setState({\n          vote: 0,\n          error: {\n            status: 500,\n            msg: \"voting did not work, please try again later\"\n          }\n        });\n      });\n    }\n  }\n}\n\nexport default ArticleVotesChange;\n"]},"metadata":{},"sourceType":"module"}