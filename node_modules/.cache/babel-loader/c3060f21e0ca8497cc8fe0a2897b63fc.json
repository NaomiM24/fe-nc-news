{"ast":null,"code":"import _classCallCheck from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import*as api from'../api';import CommentCard from'./CommentCard';var Comments=/*#__PURE__*/function(_Component){_inherits(Comments,_Component);function Comments(){var _getPrototypeOf2;var _this;_classCallCheck(this,Comments);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Comments)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={comments:[],isLoading:true,order:null,sort_by:null,deleted_message:null};_this.handleSelectChange=function(event){var sort_by=event.target.value;_this.setState({sort_by:sort_by});};_this.handleClick=function(event){var order=event.target.value;_this.setState({order:order});};_this.removeComments=function(comment_id){_this.setState(function(currentState){return{comments:currentState.comments.filter(function(comment){return comment.comment_id!==comment_id;})};});};_this.handleCreatedMessage=function(event){_this.setState({created_message:event});};_this.handleDeletedMessage=function(event){console.log(event);_this.setState({deleted_message:event});};return _this;}_createClass(Comments,[{key:\"render\",value:function render(){var _this2=this;if(this.state.isLoading){return React.createElement(\"img\",{src:\"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif\",alt:\"loading...\"});}return React.createElement(\"article\",{className:\"article-comments\"},React.createElement(\"form\",null,React.createElement(\"label\",null,\"Sort By:\",React.createElement(\"select\",{onChange:this.handleSelectChange,className:\"dropDown\"},React.createElement(\"option\",{value:\"created_at\"},\"Date\"),React.createElement(\"option\",{value:\"votes\"},\"Votes\"))),React.createElement(\"br\",null),React.createElement(\"label\",null,\"Order By: Ascending\",React.createElement(\"input\",{type:\"radio\",name:\"order\",value:\"asc\",onClick:this.handleClick}),\"Descending\",React.createElement(\"input\",{type:\"radio\",name:\"order\",value:\"desc\",onClick:this.handleClick}))),React.createElement(\"section\",null,this.state.deleted_message&&React.createElement(\"p\",{className:\"comment-message\"},this.state.deleted_message),React.createElement(\"ul\",{id:\"comment-list\"},this.state.comments.map(function(comment){return React.createElement(React.Fragment,null,React.createElement(CommentCard,{comment:comment,key:comment.comment_id,selectedUser:_this2.props.selectedUser,article_id:_this2.props.article_id,removeComments:_this2.removeComments,handleDeletedMessage:_this2.handleDeletedMessage}));}))));}},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchComments();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(prevState.sort_by!==this.state.sort_by||prevState.order!==this.state.order)this.fetchComments();}},{key:\"fetchComments\",value:function fetchComments(){var _this3=this;var article_id=this.props.article_id;var _this$state=this.state,sort_by=_this$state.sort_by,order=_this$state.order;api.getComments(article_id,sort_by,order).then(function(_ref){var comments=_ref.data.comments;return _this3.setState({comments:comments,isLoading:false});});}}]);return Comments;}(Component);export default Comments;","map":{"version":3,"sources":["/home/anatd/Naomi/northcoders/week9/fe-nc-news/src/components.js/Comments.jsx"],"names":["React","Component","api","CommentCard","Comments","state","comments","isLoading","order","sort_by","deleted_message","handleSelectChange","event","target","value","setState","handleClick","removeComments","comment_id","currentState","filter","comment","handleCreatedMessage","created_message","handleDeletedMessage","console","log","map","props","selectedUser","article_id","fetchComments","prevProps","prevState","getComments","then","data"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as api from '../api'\nimport CommentCard from './CommentCard'\n\n\nclass Comments extends Component {\n  state = {\n    comments: [],\n    isLoading: true,\n    order: null,\n    sort_by: null,\n    \n    deleted_message: null,\n  }\n  render() {\n  \n\n\n    if (this.state.isLoading){\n      return <img src=\"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif\" alt=\"loading...\"/>\n    } \n    return (\n      <article className=\"article-comments\">\n      <form>\n          <label>\n            Sort By:\n            <select onChange={this.handleSelectChange}  className=\"dropDown\">\n            <option value=\"created_at\">Date</option>\n            <option value=\"votes\">Votes</option>\n            </select>\n          </label>\n          <br/>\n          <label>\n            Order By:\n            Ascending<input type=\"radio\" name=\"order\" value=\"asc\" onClick={this.handleClick}/>\n            Descending<input type=\"radio\" name=\"order\" value=\"desc\" onClick={this.handleClick}/>\n          </label>\n        </form>\n      <section>\n          {this.state.deleted_message && <p className=\"comment-message\">{this.state.deleted_message}</p>}\n        <ul id = \"comment-list\" >\n          {this.state.comments.map(comment => {\n            return (\n              <>\n              <CommentCard comment={comment} key={comment.comment_id} selectedUser={this.props.selectedUser} article_id={this.props.article_id} removeComments={this.removeComments} handleDeletedMessage={this.handleDeletedMessage} />\n              </>\n            )\n          })}\n        </ul>\n      </section>\n      </article>\n    );\n  }\n  componentDidMount() {\n    this.fetchComments()\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n  \n    if (prevState.sort_by !== this.state.sort_by ||prevState.order !== this.state.order)\n    this.fetchComments()\n  }\n\n  fetchComments() {\n    const {article_id} = this.props\n    const {sort_by, order} = this.state\n    api.getComments(article_id, sort_by, order).then(({data: {comments}}) => this.setState({comments, isLoading: false})\n  )}\n\n  handleSelectChange = (event) => {\n    const sort_by = event.target.value;\n    this.setState({sort_by})\n  }\n  \n  handleClick = (event) => {\n    const order = event.target.value;\n    this.setState({order})\n  }\n\n  removeComments = (comment_id) => {\n    this.setState(currentState => {\n      return{comments: currentState.comments.filter(comment => {\n        return comment.comment_id !== comment_id\n      })}\n    })\n  }\n\n  handleCreatedMessage = (event) => {\n    this.setState({created_message: event})\n  }\n\n  handleDeletedMessage = (event) => {\n    console.log(event)\n    this.setState({deleted_message: event})\n  }\n\n  \n}\n\nexport default Comments;"]},"metadata":{},"sourceType":"module"}