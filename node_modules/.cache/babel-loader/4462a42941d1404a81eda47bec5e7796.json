{"ast":null,"code":"import _classCallCheck from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import ArticleCard from'./ArticleCard';import*as api from'../api';import ErrorPage from'./ErrorPage';var ArticlesList=/*#__PURE__*/function(_Component){_inherits(ArticlesList,_Component);function ArticlesList(){var _getPrototypeOf2;var _this;_classCallCheck(this,ArticlesList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ArticlesList)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={articles:[],author:'',topic:'',sort_by:null,order:null,isLoading:true,error:null};_this.handleSelectChange=function(event){var sort_by=event.target.value;_this.setState({sort_by:sort_by});};_this.handleClick=function(event){var order=event.target.value;_this.setState({order:order});};return _this;}_createClass(ArticlesList,[{key:\"render\",value:function render(){var _this$state=this.state,isLoading=_this$state.isLoading,error=_this$state.error;if(isLoading){return React.createElement(\"img\",{src:\"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif\",alt:\"loading...\"});}if(error!==null){return React.createElement(ErrorPage,{msg:error.data.msg,status:error.status});}return React.createElement(\"div\",{className:\"articles-list\"},React.createElement(\"form\",null,React.createElement(\"label\",null,\"Sort By:\",React.createElement(\"select\",{onChange:this.handleSelectChange,className:\"dropDown\"},React.createElement(\"option\",{value:\"created_at\"},\"Date\"),React.createElement(\"option\",{value:\"votes\"},\"Votes\"),React.createElement(\"option\",{value:\"comment_count\"},\"Comment Count\"))),React.createElement(\"br\",null),React.createElement(\"label\",null,\"Order By: Ascending\",React.createElement(\"input\",{type:\"radio\",name:\"order\",value:\"asc\",onClick:this.handleClick}),\"Descending\",React.createElement(\"input\",{type:\"radio\",name:\"order\",value:\"desc\",onClick:this.handleClick}))),React.createElement(\"ul\",{id:\"article-list\"},this.state.articles.map(function(article){return(// <Link key={article.article_id} to={`/articles/${article.article_id}`}> \nReact.createElement(ArticleCard,{article:article,key:article.article_id})/* </Link> */);})));}},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchArticles();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){//console.log(this.state.order)\nif(prevProps.topicName!==this.props.topicName||prevProps.authorName!==this.props.authorName||prevState.sort_by!==this.state.sort_by||prevState.order!==this.state.order)this.fetchArticles();}},{key:\"fetchArticles\",value:function fetchArticles(){var _this2=this;var _this$props=this.props,topicName=_this$props.topicName,authorName=_this$props.authorName;var _this$state2=this.state,sort_by=_this$state2.sort_by,order=_this$state2.order;api.getAllArticles(topicName,authorName,sort_by,order).then(function(_ref){var articles=_ref.data.articles;_this2.setState({articles:articles,isLoading:false,topic:topicName,author:authorName,sort_by:sort_by,order:order});}).catch(function(error){var err=error.response;_this2.setState({error:err,isLoading:false});});}}]);return ArticlesList;}(Component);export default ArticlesList;","map":{"version":3,"sources":["/home/anatd/Naomi/northcoders/week9/fe-nc-news/src/components.js/ArticlesList.jsx"],"names":["React","Component","ArticleCard","api","ErrorPage","ArticlesList","state","articles","author","topic","sort_by","order","isLoading","error","handleSelectChange","event","target","value","setState","handleClick","data","msg","status","map","article","article_id","fetchArticles","prevProps","prevState","topicName","props","authorName","getAllArticles","then","catch","err","response"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ArticleCard from './ArticleCard';\nimport * as api from '../api';\nimport ErrorPage from './ErrorPage';\n\n\nclass ArticlesList extends Component {\n  state = {\n    articles: [],\n    author: '',\n    topic: '',\n    sort_by: null,\n    order: null,\n    isLoading: true,\n    error: null,\n  }\n  render() {\n    const {isLoading, error} = this.state\n    if (isLoading){\n      return <img src=\"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif\" alt=\"loading...\"/>\n    } \n    if (error !== null){\n      return <ErrorPage msg={error.data.msg} status ={error.status}/>\n    }\n\n     \n    return (\n      <div className=\"articles-list\">\n       \n        <form>\n          <label>\n            Sort By:\n            <select onChange={this.handleSelectChange}className=\"dropDown\">\n            <option value=\"created_at\">Date</option>\n            <option value=\"votes\">Votes</option>\n            <option value=\"comment_count\">Comment Count</option>\n            </select>\n          </label><br/>\n          <label>\n            Order By:\n            Ascending<input type=\"radio\" name=\"order\" value=\"asc\" onClick={this.handleClick}/>\n            Descending<input type=\"radio\" name=\"order\" value=\"desc\" onClick={this.handleClick}/>\n          </label>\n        </form>\n        <ul id = \"article-list\">\n          {this.state.articles.map(article => {\n            return (\n              // <Link key={article.article_id} to={`/articles/${article.article_id}`}> \n                <ArticleCard article={article} key={article.article_id}/>\n              /* </Link> */            \n            )       \n          })}\n        </ul>\n      </div>\n    );\n  }\n\n  \n  componentDidMount() {\n    this.fetchArticles()\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    //console.log(this.state.order)\n    if (prevProps.topicName !== this.props.topicName ||prevProps.authorName !== this.props.authorName ||prevState.sort_by !== this.state.sort_by ||prevState.order !== this.state.order)\n    this.fetchArticles()\n  }\n\n  fetchArticles() {\n    const {topicName, authorName} = this.props\n    const {sort_by, order} = this.state\n    api.getAllArticles(topicName, authorName, sort_by,\n      order)\n    .then(({data: {articles}}) => {\n      this.setState({articles, isLoading: false, topic: topicName, author: authorName, sort_by, order\n      })\n    })\n      .catch(error => {\n        const err = error.response\n        this.setState({error: err, isLoading: false})\n        })\n  }\n\n  handleSelectChange = (event) => {\n    const sort_by = event.target.value;\n    this.setState({sort_by})\n  }\n\n  handleClick = (event) => {\n    const order = event.target.value;\n    this.setState({order})\n  }\n}\n\nexport default ArticlesList;"]},"metadata":{},"sourceType":"module"}