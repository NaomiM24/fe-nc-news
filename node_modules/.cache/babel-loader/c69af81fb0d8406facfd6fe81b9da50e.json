{"ast":null,"code":"import _classCallCheck from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/anatd/Naomi/northcoders/week9/fe-nc-news/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import*as api from'../api.js';import Toggle from'./Toggle.jsx';import Comments from'./Comments.jsx';import{Link}from'@reach/router';import ErrorPage from'./ErrorPage';import ArticleVotesChange from'./ArticleVotesChange';import CommentAdder from'./CommentAdder.jsx';var SingleArticle=/*#__PURE__*/function(_Component){_inherits(SingleArticle,_Component);function SingleArticle(){var _getPrototypeOf2;var _this;_classCallCheck(this,SingleArticle);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(SingleArticle)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={article:[],isLoading:true,error:null,created_message:null};_this.handleCreatedMessage=function(event){console.log(event);_this.setState({created_message:event});};return _this;}_createClass(SingleArticle,[{key:\"render\",value:function render(){var _this$state=this.state,isLoading=_this$state.isLoading,error=_this$state.error,article=_this$state.article;if(isLoading){return React.createElement(\"img\",{src:\"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif\",alt:\"loading...\"});}if(error!==null){return React.createElement(ErrorPage,{msg:error.data.msg,status:error.status});}var AuthorLink=\"/authors/\".concat(article.author);var TopicLink=\"/topics/\".concat(article.topic);return React.createElement(\"div\",null,React.createElement(\"main\",null,React.createElement(\"h2\",null,article.title),React.createElement(Link,{to:AuthorLink},React.createElement(\"h3\",null,\"by \",article.author)),React.createElement(Link,{to:TopicLink},React.createElement(\"h4\",null,\"in \",article.topic)),React.createElement(\"h5\",{className:\"article-votes\"},\" \",React.createElement(ArticleVotesChange,{article_id:article.article_id,article_vote:article.votes}),\"comments: \",article.comment_count),React.createElement(\"p\",{className:\"article-body\"},article.body)),React.createElement(\"section\",null,React.createElement(Toggle,{buttonName:\"Add a Comment\"},React.createElement(CommentAdder,{article_id:article.article_id,user:this.props.selectedUser,handleCreatedMessage:this.handleCreatedMessage})),this.state.created_message&&React.createElement(\"p\",{className:\"comment-message\"},this.state.created_message),React.createElement(\"br\",null),React.createElement(Toggle,{buttonName:this.props.showContent?\"Hide Comments\":\"View Comments\"},React.createElement(Comments,{article_id:article.article_id,selectedUser:this.props.selectedUser,key:1}))));}},{key:\"fetchData\",value:function fetchData(){var _this2=this;api.getSingleArticle(this.props.article_id).then(function(_ref){var article=_ref.data.article;_this2.setState({article:article,isLoading:false});}).catch(function(error){var err=error.response;_this2.setState({error:err,isLoading:false});});}},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchData();}}]);return SingleArticle;}(Component);export default SingleArticle;","map":{"version":3,"sources":["/home/anatd/Naomi/northcoders/week9/fe-nc-news/src/components.js/SingleArticle.jsx"],"names":["React","Component","api","Toggle","Comments","Link","ErrorPage","ArticleVotesChange","CommentAdder","SingleArticle","state","article","isLoading","error","created_message","handleCreatedMessage","event","console","log","setState","data","msg","status","AuthorLink","author","TopicLink","topic","title","article_id","votes","comment_count","body","props","selectedUser","showContent","getSingleArticle","then","catch","err","response","fetchData"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as api from '../api.js'\nimport Toggle from './Toggle.jsx';\nimport Comments from './Comments.jsx';\nimport { Link  } from '@reach/router';\nimport ErrorPage from './ErrorPage';\nimport ArticleVotesChange from './ArticleVotesChange'\nimport CommentAdder from './CommentAdder.jsx';\n\nclass SingleArticle extends Component {\n  state = {\n    article: [],\n    isLoading: true,\n    error: null,\n    created_message: null,\n  };\n  render() {\n    const {isLoading, error, article} = this.state\n\n    if (isLoading){\n      return <img src=\"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif\" alt=\"loading...\"/>\n    } \n\n    if (error !== null){\n      return <ErrorPage msg={error.data.msg} status ={error.status}/>\n    }\n\n\n    const AuthorLink = `/authors/${article.author}`\n    const TopicLink = `/topics/${article.topic}`\n    return (\n      <div>\n      <main>\n        <h2>{article.title}</h2>\n        <Link to={AuthorLink}><h3>by {article.author}</h3></Link>\n        <Link to={TopicLink}><h4>in {article.topic}</h4></Link>\n        <h5 className = \"article-votes\"> <ArticleVotesChange article_id= {article.article_id} article_vote={article.votes}/>comments: {article.comment_count}</h5>\n        <p className=\"article-body\">{article.body}</p>\n      </main>\n      <section>\n        <Toggle buttonName=\"Add a Comment\">\n          <CommentAdder article_id = {article.article_id} user={this.props.selectedUser} handleCreatedMessage={this.handleCreatedMessage}/>\n        </Toggle>\n        {this.state.created_message && <p className=\"comment-message\">{this.state.created_message}</p>}\n        <br/>\n        <Toggle buttonName={this.props.showContent ? \"Hide Comments\": \"View Comments\" }>\n          <Comments article_id={article.article_id} selectedUser={this.props.selectedUser} key={1}/>\n        </Toggle>\n      </section>\n      </div>\n    );\n  }\n  fetchData() {\n    api.getSingleArticle(this.props.article_id).then(({data: {article}}) => {\n      this.setState({article, isLoading: false})\n    })\n    .catch(error => {\n      const err = error.response\n      this.setState({error: err, isLoading: false})\n    })\n  }\n  componentDidMount(){\n    this.fetchData();\n  }\n\n  handleCreatedMessage = (event) => {\n    console.log(event)\n    this.setState({created_message: event})\n  }\n}\n\nexport default SingleArticle;"]},"metadata":{},"sourceType":"module"}