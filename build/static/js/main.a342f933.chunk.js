(this["webpackJsonpfe-nc-news"]=this["webpackJsonpfe-nc-news"]||[]).push([[0],{10:function(e,t,a){e.exports={ul:"Nav_ul__24Jpq",li:"Nav_li__3R7K4"}},11:function(e,t,a){e.exports={title:"Header_title__2c8DZ"}},12:function(e,t,a){e.exports={selectuser:"SelectUser_selectuser__-wSUe",text:"SelectUser_text__1lAIu"}},25:function(e,t,a){e.exports=a.p+"static/media/home-icon.133ce3f8.svg"},26:function(e,t,a){e.exports=a(58)},31:function(e,t,a){},32:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),c=a.n(s),l=(a(31),a(1)),o=a(2),i=a(4),u=a(3),m=a(5),h=(a(32),a(6)),d=a(11),p=a.n(d),v=a(25),f=a.n(v),b=function(){return r.a.createElement("header",null,r.a.createElement(h.a,{to:"/",className:p.a.home},r.a.createElement("img",{src:f.a,alt:"Home"})),r.a.createElement("h1",{className:p.a.title},"northcoders news"))},g=a(8),E=a.n(g),y="https://naomi-be-news.herokuapp.com/api",k=function(e,t){return E.a.patch("".concat(y,"/comments/").concat(e),{inc_votes:t})},C=function(e,t){return E.a.patch("".concat(y,"/articles/").concat(e),{inc_votes:t})},_=function(e){return E.a.get("".concat(y,"/users/").concat(e))},O=function(e,t,a){return E.a.post("".concat(y,"/articles/").concat(e,"/comments"),{username:t,body:a})},j=function(e){return E.a.delete("".concat(y,"/comments/").concat(e))},N=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={vote:0,error:{status:null,msg:""}},a.handleClick=function(e){a.setState({vote:e.target.value})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.error,t=e.status,a=e.msg;return r.a.createElement("div",null,"votes: ",this.props.article_vote+ +this.state.vote,r.a.createElement("br",null),r.a.createElement("button",{className:"like",value:1,onClick:this.handleClick,disabled:1===this.state.vote},"Like"),r.a.createElement("button",{className:"dislike",value:-1,onClick:this.handleClick,disabled:-1===this.state.vote},"Dislike"),r.a.createElement("button",{className:"cancel",value:0,onClick:this.handleClick,disabled:0===this.state.vote},"Cancel Vote"),null!==t&&r.a.createElement("p",null,"Error ",t,"! ",a))}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props.article_id;if(0===+this.state.vote&&0!==+t.vote){var r=-+t.vote;C(n,r).catch((function(e){return a.setState({vote:0,error:{status:500,msg:"cancel vote did not work at this time, please try again later"}})}))}else if(t.vote!==this.state.vote){var s=this.state.vote;C(n,s).catch((function(e){return a.setState({vote:0,error:{status:500,msg:"voting did not work, please try again later"}})}))}}}]),t}(n.Component),w=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.article,t=e.created_at.split("T"),a=t[0].split("-"),n=t[1].split(":"),s="/articles/".concat(e.article_id),c="/authors/".concat(e.author),l="/topics/".concat(e.topic);return r.a.createElement("div",{className:"article-card"},r.a.createElement("li",null,r.a.createElement("h2",null,r.a.createElement(h.a,{to:s},e.title)),r.a.createElement("h3",null,r.a.createElement("img",{src:this.state.user.avatar_url,alt:"user avatar",className:"avatar"}),r.a.createElement("br",null),"by: ",r.a.createElement(h.a,{to:c}," ",e.author),r.a.createElement("br",null),"in: ",r.a.createElement(h.a,{to:l},e.topic)),r.a.createElement("p",null,"comments: ",e.comment_count,r.a.createElement("br",null),"published on ",a[2],"-",a[1],"-",a[0]," at ",n[0],":",n[1]),r.a.createElement("h4",{className:"article-votes"},r.a.createElement(N,{article_id:e.article_id,article_vote:e.votes}))))}},{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"fetchUser",value:function(){var e=this,t=this.props.article.author;_(t).then((function(t){var a=t.data.user;return e.setState({user:a})}))}}]),t}(n.Component),S=function(e){var t=e.msg,a=e.status;return console.log(t),r.a.createElement("main",null,r.a.createElement("h2",null," Error: ",a," "),r.a.createElement("h3",null," ",t," "))},D=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={articles:[],author:"",topic:"",sort_by:null,order:null,isLoading:!0,error:null},a.handleSelectChange=function(e){var t=e.target.value;a.setState({sort_by:t})},a.handleClick=function(e){var t=e.target.value;a.setState({order:t})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.error;return t?r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif",alt:"loading..."}):null!==a?r.a.createElement(S,{msg:a.data.msg,status:a.status}):r.a.createElement("div",{className:"articles-list"},r.a.createElement("form",null,r.a.createElement("label",null,"Sort By:",r.a.createElement("select",{onChange:this.handleSelectChange,className:"dropDown"},r.a.createElement("option",{value:"created_at"},"Date"),r.a.createElement("option",{value:"votes"},"Votes"),r.a.createElement("option",{value:"comment_count"},"Comment Count"))),r.a.createElement("br",null),r.a.createElement("label",null,"Order By: Ascending",r.a.createElement("input",{type:"radio",name:"order",value:"asc",onClick:this.handleClick}),"Descending",r.a.createElement("input",{type:"radio",name:"order",value:"desc",onClick:this.handleClick}))),r.a.createElement("ul",{id:"article-list"},this.state.articles.map((function(e){return r.a.createElement(w,{article:e,key:e.article_id})}))))}},{key:"componentDidMount",value:function(){this.fetchArticles()}},{key:"componentDidUpdate",value:function(e,t){e.topicName===this.props.topicName&&e.authorName===this.props.authorName&&t.sort_by===this.state.sort_by&&t.order===this.state.order||this.fetchArticles()}},{key:"fetchArticles",value:function(){var e=this,t=this.props,a=t.topicName,n=t.authorName,r=this.state,s=r.sort_by,c=r.order;(function(e,t,a,n){return E.a.get("".concat(y,"/articles"),{params:{topic:e,author:t,sort_by:a,order:n}})})(a,n,s,c).then((function(t){var r=t.data.articles;e.setState({articles:r,isLoading:!1,topic:a,author:n,sort_by:s,order:c})})).catch((function(t){var a=t.response;e.setState({error:a,isLoading:!1})}))}}]),t}(n.Component),U=function(){return r.a.createElement("main",{className:"homepage"},r.a.createElement(D,null))},L=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement("h2",{className:"topic"}," ",this.props.topicName," "),r.a.createElement(D,{topicName:this.props.topicName}))}}]),t}(n.Component),A=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"All articles by  ",this.props.authorName," "),r.a.createElement(D,{authorName:this.props.authorName}))}}]),t}(n.Component),M=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={showContent:!1},a.displayContent=function(){a.setState((function(e){return{showContent:!e.showContent}}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.state.showContent&&this.props.children,r.a.createElement("button",{onClick:this.displayContent},this.props.buttonName))}}]),t}(n.Component),x=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={vote:0,inputsDisabled:!0,error:{status:null,msg:""}},a.handleClick=function(e){a.setState({vote:e.target.value})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.error,t=e.status,a=e.msg;return r.a.createElement("div",null,"votes: ",this.props.comment_vote+ +this.state.vote,r.a.createElement("br",null),r.a.createElement("button",{className:"like",value:"1",onClick:this.handleClick,disabled:1===this.state.vote},"Like"),r.a.createElement("button",{className:"dislike",value:"-1",onClick:this.handleClick,disabled:-1===this.state.vote},"Dislike"),r.a.createElement("button",{className:"cancelVote",value:"0",onClick:this.handleClick,disabled:0===this.state.vote},"Cancel Vote"),null!==this.state.error.status&&r.a.createElement("p",null,"Error ",t,"! ",a))}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props.comment_id;if(0===+this.state.vote&&0!==+t.vote){var r=-+t.vote;k(n,r).catch((function(e){return a.setState({vote:0,error:{status:500,msg:"cancel vote did not work at this time, please try again later"}})}))}else if(t.vote!==this.state.vote){var s=this.state.vote;k(n,s).catch((function(e){a.setState({vote:0,error:{status:500,msg:"voting did not work, please try again later"}})}))}}}]),t}(n.Component),B=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:{status:null,msg:"",isLoading:!1}},a.handleClick=function(){var e=a.props,t=e.comment_id,n=e.removeComments;a.setState({isLoading:!0}),j(t).then((function(){a.setState({isLoading:!1}),a.props.handleDeletedMessage("Message Successfully Deleted")})).catch((function(e){return a.props.handleDeletedMessage("status: 500, your comment could not be deleted at this time, please try again later")})),n(t)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){if(this.state.isLoading)return r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif",alt:"loading..."});var e=this.state.error,t=e.status,a=e.msg;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"comment-remover",onClick:this.handleClick},"Remove Comment"),null!==t&&r.a.createElement("p",null,"Error",t,"! ",a))}}]),t}(n.Component),V=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:{}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.user,t=this.props,a=t.comment,n=t.selectedUser,s=a.created_at.split("T"),c=s[0].split("-"),l=s[1].split(":");return r.a.createElement("main",null,r.a.createElement("li",{className:"comment-card"},r.a.createElement("h3",{className:"comment-user"},r.a.createElement("img",{src:e.avatar_url,alt:"user avatar",className:"avatar"}),r.a.createElement("br",null),"posted by: ",a.author),r.a.createElement("h4",{className:"comment-votes"},r.a.createElement(x,{comment_id:a.comment_id,comment_vote:a.votes})),r.a.createElement("h5",{className:"comment-published-at"},"published on ",c[2],"-",c[1],"-",c[0]," at ",l[0],":",l[1]),r.a.createElement("p",{className:"comment-body"},a.body),n===a.author&&r.a.createElement(B,{comment_id:a.comment_id,removeComments:this.props.removeComments,handleDeletedMessage:this.props.handleDeletedMessage})))}},{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"fetchUser",value:function(){var e=this,t=this.props.comment.author;_(t).then((function(t){var a=t.data.user;return e.setState({user:a})}))}}]),t}(n.Component),W=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={comments:[],isLoading:!0,order:null,sort_by:null,deleted_message:null},a.handleSelectChange=function(e){var t=e.target.value;a.setState({sort_by:t})},a.handleClick=function(e){var t=e.target.value;a.setState({order:t})},a.removeComments=function(e){a.setState((function(t){return{comments:t.comments.filter((function(t){return t.comment_id!==e}))}}))},a.handleCreatedMessage=function(e){a.setState({created_message:e})},a.handleDeletedMessage=function(e){console.log(e),a.setState({deleted_message:e})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.state.isLoading?r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif",alt:"loading..."}):r.a.createElement("article",{className:"article-comments"},r.a.createElement("form",null,r.a.createElement("label",null,"Sort By:",r.a.createElement("select",{onChange:this.handleSelectChange,className:"dropDown"},r.a.createElement("option",{value:"created_at"},"Date"),r.a.createElement("option",{value:"votes"},"Votes"))),r.a.createElement("br",null),r.a.createElement("label",null,"Order By: Ascending",r.a.createElement("input",{type:"radio",name:"order",value:"asc",onClick:this.handleClick}),"Descending",r.a.createElement("input",{type:"radio",name:"order",value:"desc",onClick:this.handleClick}))),r.a.createElement("section",null,this.state.deleted_message&&r.a.createElement("p",{className:"comment-message"},this.state.deleted_message),r.a.createElement("ul",{id:"comment-list"},this.state.comments.map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,{comment:t,key:t.comment_id,selectedUser:e.props.selectedUser,article_id:e.props.article_id,removeComments:e.removeComments,handleDeletedMessage:e.handleDeletedMessage}))})))))}},{key:"componentDidMount",value:function(){this.fetchComments()}},{key:"componentDidUpdate",value:function(e,t){t.sort_by===this.state.sort_by&&t.order===this.state.order||this.fetchComments()}},{key:"fetchComments",value:function(){var e=this,t=this.props.article_id,a=this.state;(function(e,t,a){return E.a.get("".concat(y,"/articles/").concat(e,"/comments"),{params:{sort_by:t,order:a}})})(t,a.sort_by,a.order).then((function(t){var a=t.data.comments;return e.setState({comments:a,isLoading:!1})}))}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={body:"",postedComment:{},isLoading:!1},a.handleChange=function(e){a.setState({body:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.article_id,r=t.user,s=a.state.body;a.setState({isLoading:!0}),O(n,r,s).then((function(){a.setState({body:"",isLoading:!1}),a.props.handleCreatedMessage("Comment Successfully Posted")})).catch((function(e){return a.props.handleCreatedMessage("status: 500, your comment could not be posted at this time, please try again later")}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.state.isLoading?r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif",alt:"loading..."}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("textarea",{type:"text",required:!0,placeholder:"What do you think?",className:"comment-add-box",onChange:this.handleChange,value:this.state.body}),r.a.createElement("br",null),r.a.createElement("button",null,"Post"),r.a.createElement("br",null)))}}]),t}(n.Component),H=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={article:[],isLoading:!0,error:null,created_message:null},a.handleCreatedMessage=function(e){console.log(e),a.setState({created_message:e})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.error,n=e.article;if(t)return r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif",alt:"loading..."});if(null!==a)return r.a.createElement(S,{msg:a.data.msg,status:a.status});var s="/authors/".concat(n.author),c="/topics/".concat(n.topic);return r.a.createElement("div",null,r.a.createElement("main",null,r.a.createElement("h2",null,n.title),r.a.createElement(h.a,{to:s},r.a.createElement("h3",null,"by ",n.author)),r.a.createElement(h.a,{to:c},r.a.createElement("h4",null,"in ",n.topic)),r.a.createElement("h5",{className:"article-votes"}," ",r.a.createElement(N,{article_id:n.article_id,article_vote:n.votes}),"comments: ",n.comment_count),r.a.createElement("p",{className:"article-body"},n.body)),r.a.createElement("section",null,r.a.createElement(M,{buttonName:"Add a Comment"},r.a.createElement(F,{article_id:n.article_id,user:this.props.selectedUser,handleCreatedMessage:this.handleCreatedMessage})),this.state.created_message&&r.a.createElement("p",{className:"comment-message"},this.state.created_message),r.a.createElement("br",null),r.a.createElement(M,{buttonName:this.props.showContent?"Hide Comments":"View Comments"},r.a.createElement(W,{article_id:n.article_id,selectedUser:this.props.selectedUser,key:1}))))}},{key:"fetchData",value:function(){var e,t=this;(e=this.props.article_id,E.a.get("".concat(y,"/articles/").concat(e))).then((function(e){var a=e.data.article;t.setState({article:a,isLoading:!1})})).catch((function(e){var a=e.response;t.setState({error:a,isLoading:!1})}))}},{key:"componentDidMount",value:function(){this.fetchData()}}]),t}(n.Component),J=a(12),P=a.n(J),q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={users:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:P.a.selectuser},r.a.createElement("label",null,r.a.createElement("p",{className:P.a.text},"Select User:"),r.a.createElement("select",{className:"dropDown",onChange:this.props.handleUserChange},this.state.users.map((function(e){return r.a.createElement("option",{key:e.username,value:e.username},e.username)})))))}},{key:"componentDidMount",value:function(){var e=this;E.a.get("".concat(y,"/users")).then((function(t){var a=t.data.users;e.setState({users:a})}))}}]),t}(n.Component),I=a(10),R=a.n(I),T=function(){return r.a.createElement("nav",null,r.a.createElement("ul",{className:R.a.ul},r.a.createElement("li",{className:R.a.li},r.a.createElement(h.a,{to:"/topics/coding"},"Coding")),r.a.createElement("li",{className:R.a.li},r.a.createElement(h.a,{to:"/topics/football"},"Football")),r.a.createElement("li",{className:R.a.li},r.a.createElement(h.a,{to:"/topics/cooking"},"Cooking")," ")))},K=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={selectedUser:"tickle122",error:{status:404,msg:"Page not found"}},a.handleUserChange=function(e){a.setState({selectedUser:e.target.value})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(b,null),r.a.createElement(T,null),r.a.createElement(q,{handleUserChange:this.handleUserChange}),r.a.createElement("h2",null,"Welcome ",this.state.selectedUser,"!"),r.a.createElement(h.b,null,r.a.createElement(U,{path:"/"}),r.a.createElement(L,{path:"/topics/:topicName"}),r.a.createElement(A,{path:"/authors/:authorName"}),r.a.createElement(H,{path:"/articles/:article_id",selectedUser:this.state.selectedUser}),r.a.createElement(S,{default:!0,msg:this.state.error.msg,status:this.state.error.status})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[26,1,2]]]);
//# sourceMappingURL=main.a342f933.chunk.js.map