(this["webpackJsonpfe-nc-news"]=this["webpackJsonpfe-nc-news"]||[]).push([[0],{10:function(e,t,a){e.exports={ul:"Nav_ul__24Jpq",li:"Nav_li__3R7K4"}},11:function(e,t,a){e.exports=a.p+"static/media/code.cedc27e3.svg"},12:function(e,t,a){e.exports=a.p+"static/media/football.050bd8a0.svg"},13:function(e,t,a){e.exports=a.p+"static/media/cooking.35324778.svg"},14:function(e,t,a){e.exports={selectuser:"SelectUser_selectuser__-wSUe",text:"SelectUser_text__1lAIu"}},27:function(e,t,a){},28:function(e,t,a){e.exports=a.p+"static/media/home-icon.133ce3f8.svg"},29:function(e,t,a){e.exports=a.p+"static/media/bin.650cdc57.svg"},31:function(e,t,a){e.exports=a(63)},36:function(e,t,a){},37:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),s=a.n(c),o=(a(36),a(1)),l=a(2),i=a(4),m=a(3),u=a(5),d=(a(37),a(6)),h=a(27),p=a.n(h),v=a(28),f=a.n(v),g=function(e){e.selectedUser;return r.a.createElement("header",null,r.a.createElement(d.a,{to:"/",className:p.a.home},r.a.createElement("img",{src:f.a,alt:"Home"})),r.a.createElement("h1",null,"northcoders news"))},b=a(8),E=a.n(b),y="https://naomi-be-news.herokuapp.com/api",C=function(e,t,a){return E.a.patch("".concat(y,"/").concat(e,"/").concat(t),{inc_votes:a})},k=function(e){return E.a.get("".concat(y,"/users/").concat(e))},_=function(e,t,a){return E.a.post("".concat(y,"/articles/").concat(e,"/comments"),{username:t,body:a})},O=function(e){return E.a.delete("".concat(y,"/comments/").concat(e))},j=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={vote:0,error:{status:null,msg:""}},a.handleClick=function(e){0===a.state.vote?a.setState({vote:e.target.value}):a.setState({vote:0})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.error,t=e.status,a=e.msg,n=this.props.vote;return r.a.createElement("div",null,r.a.createElement("button",{id:"like",className:"has-been-"+(1===this.state.vote&&"liked"),value:1,onClick:this.handleClick,disabled:1===this.state.vote},"\u21e7"),r.a.createElement("br",null),n+ +this.state.vote,r.a.createElement("br",null),r.a.createElement("button",{id:"dislike",value:-1,onClick:this.handleClick,disabled:-1===this.state.vote},"\u21e9"),null!==t&&r.a.createElement("p",null,"Error ",t,"! ",a))}},{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props,r=n.id,c=n.type;if(0===+this.state.vote&&0!==+t.vote){var s=-+t.vote;C(c,r,s).catch((function(e){return a.setState({vote:0,error:{status:500,msg:"cancel vote did not work at this time, please try again later"}})}))}else if(t.vote!==this.state.vote){var o=this.state.vote;C(c,r,o).catch((function(e){return a.setState({vote:0,error:{status:500,msg:"voting did not work, please try again later"}})}))}}}]),t}(n.Component),N=a(11),w=a.n(N),S=a(12),U=a.n(S),D=a(13),L=a.n(D),A=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:{}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.article,t=e.created_at.split("T"),a=t[0].split("-"),n=t[1].split(":"),c="/articles/".concat(e.article_id),s="/authors/".concat(e.author),o="/topics/".concat(e.topic);return r.a.createElement("div",{className:"article-card"},r.a.createElement("li",null,r.a.createElement(d.a,{to:c,className:"article-card-title"},r.a.createElement("h2",null,e.title,r.a.createElement("hr",null))),r.a.createElement("div",{className:"article-card-user"},r.a.createElement(d.a,{to:s},r.a.createElement("img",{src:this.state.user.avatar_url,alt:"user avatar",className:"avatar"}))),r.a.createElement("div",{className:"article-card-topic"},r.a.createElement(d.a,{to:o},"football"===e.topic?r.a.createElement("img",{src:U.a,alt:"football"}):"cooking"===e.topic?r.a.createElement("img",{src:L.a,alt:"cooking"}):r.a.createElement("img",{src:w.a,alt:"code"}))),r.a.createElement("p",null,e.comment_count," comments",r.a.createElement("br",null),"published on ",a[2],"-",a[1],"-",a[0]," at ",n[0],":",n[1]),r.a.createElement("h4",{className:"article-card-votes"},r.a.createElement(j,{id:e.article_id,vote:e.votes,type:"articles"}))))}},{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"fetchUser",value:function(){var e=this,t=this.props.article.author;k(t).then((function(t){var a=t.data.user;return e.setState({user:a})}))}}]),t}(n.Component),M=function(e){var t=e.msg,a=e.status;return r.a.createElement("main",null,r.a.createElement("h2",null," Error: ",a," "),r.a.createElement("h3",null," ",t," "))},x=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={articles:[],author:"",topic:"",sort_by:null,order:null,isLoading:!0,error:null},a.handleSelectChange=function(e){var t=e.target.value;a.setState({sort_by:t})},a.handleClick=function(e){var t=e.target.value;a.setState({order:t})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.error;return t?r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif",alt:"loading..."}):null!==a?r.a.createElement(M,{msg:a.data.msg,status:a.status}):r.a.createElement("div",{className:"articles-list"},r.a.createElement("form",null,r.a.createElement("label",null,"Sort By:",r.a.createElement("select",{onChange:this.handleSelectChange,className:"dropDown"},r.a.createElement("option",{value:"created_at"},"Date"),r.a.createElement("option",{value:"votes"},"Votes"),r.a.createElement("option",{value:"comment_count"},"Comment Count"))),r.a.createElement("br",null),r.a.createElement("label",null,"Order By: "),"Ascending",r.a.createElement("input",{type:"radio",name:"order",value:"asc",onClick:this.handleClick}),"Descending",r.a.createElement("input",{type:"radio",name:"order",value:"desc",onClick:this.handleClick})),r.a.createElement("ul",{id:"article-list"},this.state.articles.map((function(e){return r.a.createElement(A,{article:e,key:e.article_id})}))))}},{key:"componentDidMount",value:function(){this.fetchArticles()}},{key:"componentDidUpdate",value:function(e,t){e.topicName===this.props.topicName&&e.authorName===this.props.authorName&&t.sort_by===this.state.sort_by&&t.order===this.state.order||this.fetchArticles()}},{key:"fetchArticles",value:function(){var e=this,t=this.props,a=t.topicName,n=t.authorName,r=this.state,c=r.sort_by,s=r.order;(function(e,t,a,n){return E.a.get("".concat(y,"/articles"),{params:{topic:e,author:t,sort_by:a,order:n}})})(a,n,c,s).then((function(t){var r=t.data.articles;e.setState({articles:r,isLoading:!1,topic:a,author:n,sort_by:c,order:s})})).catch((function(t){var a=t.response;e.setState({error:a,isLoading:!1})}))}}]),t}(n.Component),P=function(){return r.a.createElement("main",{className:"homepage"},r.a.createElement(x,null))},B=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement("h2",{className:"topic"},"all articles in ",this.props.topicName," "),r.a.createElement(x,{topicName:this.props.topicName}))}}]),t}(n.Component),W=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"All articles by  ",this.props.authorName," "),r.a.createElement(x,{authorName:this.props.authorName}))}}]),t}(n.Component),F=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={showContent:!1},a.displayContent=function(){a.setState((function(e){return{showContent:!e.showContent}}))},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.state.showContent&&this.props.children,r.a.createElement("button",{onClick:this.displayContent},this.props.buttonName))}}]),t}(n.Component),J=a(30),V=a(29),q=a.n(V),H=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={error:{status:null,msg:"",isLoading:!1}},a.handleClick=function(){var e=a.props,t=e.comment_id,n=e.removeComments;a.setState({isLoading:!0}),O(t).then((function(){a.setState({isLoading:!1}),a.props.handleDeletedMessage("Comment Successfully Deleted")})).catch((function(e){return a.props.handleDeletedMessage("status: 500, your comment could not be deleted at this time, please try again later")})),n(t)},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){if(this.state.isLoading)return r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif",alt:"loading..."});var e=this.state.error,t=e.status,a=e.msg;return r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:q.a,alt:"remove",className:"comment-remover",onClick:this.handleClick}),null!==t&&r.a.createElement("p",null,"Error",t,"! ",a))}}]),t}(n.Component),I=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:{}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.user,t=this.props,a=t.comment,n=t.selectedUser,c=a.created_at.split("T"),s=c[0].split("-"),o=c[1].split(":");return r.a.createElement("li",{className:"comment-card"},r.a.createElement("h3",{className:"comment-user"},r.a.createElement("img",{src:e.avatar_url,alt:"user avatar",className:"avatar"}),r.a.createElement("br",null),r.a.createElement(d.a,{to:"/authors/".concat(a.author)},"posted by ",a.author)),r.a.createElement("h4",{className:"comment-votes"},r.a.createElement(j,{type:"comments",id:a.comment_id,vote:a.votes})),r.a.createElement("h5",{className:"comment-published-at"},"published on ",s[2],"-",s[1],"-",s[0]," at ",o[0],":",o[1]),r.a.createElement("p",{className:"comment-body"},a.body),n===a.author&&r.a.createElement(H,{comment_id:a.comment_id,removeComments:this.props.removeComments,handleDeletedMessage:this.props.handleDeletedMessage}))}},{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"fetchUser",value:function(){var e=this,t=this.props.comment.author;k(t).then((function(t){var a=t.data.user;return e.setState({user:a})}))}}]),t}(n.Component),T=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={comments:[],isLoading:!0,order:null,sort_by:null,deleted_message:null},a.handleSelectChange=function(e){var t=e.target.value;a.setState({sort_by:t})},a.handleClick=function(e){var t=e.target.value;a.setState({order:t})},a.removeComments=function(e){a.setState((function(t){return{comments:t.comments.filter((function(t){return t.comment_id!==e}))}}))},a.handleDeletedMessage=function(e){a.setState({deleted_message:e})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.state.isLoading?r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif",alt:"loading..."}):r.a.createElement("article",{className:"article-comments"},r.a.createElement("form",null,r.a.createElement("label",null,"Sort By:",r.a.createElement("select",{onChange:this.handleSelectChange,className:"dropDown"},r.a.createElement("option",{value:"created_at"},"Date"),r.a.createElement("option",{value:"votes"},"Votes"))),r.a.createElement("br",null),r.a.createElement("label",null,"Order By: Ascending",r.a.createElement("input",{type:"radio",name:"order",value:"asc",onClick:this.handleClick}),"Descending",r.a.createElement("input",{type:"radio",name:"order",value:"desc",onClick:this.handleClick}))),r.a.createElement("section",null,this.state.deleted_message&&r.a.createElement("p",{className:"comment-message"},this.state.deleted_message),r.a.createElement("ul",{id:"comment-list"},this.state.comments.map((function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I,{comment:t,key:t.comment_id,selectedUser:e.props.selectedUser,article_id:e.props.article_id,removeComments:e.removeComments,handleDeletedMessage:e.handleDeletedMessage}))})))))}},{key:"componentDidMount",value:function(){this.fetchComments()}},{key:"componentDidUpdate",value:function(e,t){var a=this;t.sort_by===this.state.sort_by&&t.order===this.state.order||this.fetchComments(),e.posted_comment!==this.props.posted_comment&&this.setState((function(e){return{comments:[a.props.posted_comment].concat(Object(J.a)(e.comments))}}))}},{key:"fetchComments",value:function(){var e=this,t=this.props.article_id,a=this.state;(function(e,t,a){return E.a.get("".concat(y,"/articles/").concat(e,"/comments"),{params:{sort_by:t,order:a}})})(t,a.sort_by,a.order).then((function(t){var a=t.data.comments;return e.setState({comments:a,isLoading:!1})}))}}]),t}(n.Component),K=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={body:"",isLoading:!1},a.handleChange=function(e){a.setState({body:e.target.value})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.article_id,r=t.user,c=a.state.body;a.setState({isLoading:!0}),_(n,r,c).then((function(e){var t=e.data.comment;a.setState({body:"",isLoading:!1}),a.props.handleCreatedMessage("Comment Successfully Posted"),a.props.handlePostedComment(t)})).catch((function(e){return a.props.handleCreatedMessage("status: 500, your comment could not be posted at this time, please try again later")}))},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.state.isLoading?r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif",alt:"loading..."}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("textarea",{type:"text",required:!0,placeholder:"What do you think?",className:"comment-add-box",onChange:this.handleChange,value:this.state.body}),r.a.createElement("br",null),r.a.createElement("button",null,"Post"),r.a.createElement("br",null)))}}]),t}(n.Component),R=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={article:[],isLoading:!0,error:null,created_message:null,posted_comment:{}},a.handleCreatedMessage=function(e){a.setState({created_message:e})},a.handlePostedComment=function(e){a.setState({posted_comment:e})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.error,n=e.article;if(t)return r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif",alt:"loading..."});if(null!==a)return r.a.createElement(M,{msg:a.data.msg,status:a.status});var c="/authors/".concat(n.author),s="/topics/".concat(n.topic);return r.a.createElement("div",{className:"single-article"},r.a.createElement("main",null,r.a.createElement("h2",null,n.title),r.a.createElement(d.a,{to:c},r.a.createElement("h3",null,"by ",n.author)),r.a.createElement("div",{id:"votes"},r.a.createElement(j,{type:"articles",id:n.article_id,vote:n.votes})),r.a.createElement("div",{id:"topic"},r.a.createElement(d.a,{to:s},"football"===n.topic?r.a.createElement("img",{src:U.a,alt:"football"}):"cooking"===n.topic?r.a.createElement("img",{src:L.a,alt:"cooking"}):r.a.createElement("img",{src:w.a,alt:"code"})))),r.a.createElement("hr",null),r.a.createElement("p",{className:"article-body"},n.body),r.a.createElement("hr",null),r.a.createElement("h4",null,n.comment_count," comments "),r.a.createElement("section",null,r.a.createElement(K,{article_id:n.article_id,user:this.props.selectedUser,handleCreatedMessage:this.handleCreatedMessage,handlePostedComment:this.handlePostedComment}),this.state.created_message&&r.a.createElement("p",{className:"comment-message"},this.state.created_message),r.a.createElement("br",null),r.a.createElement(F,{buttonName:this.props.showContent?"Hide Comments":"View Comments"},r.a.createElement(T,{article_id:n.article_id,selectedUser:this.props.selectedUser,posted_comment:this.state.posted_comment}))))}},{key:"fetchData",value:function(){var e,t=this;(e=this.props.article_id,E.a.get("".concat(y,"/articles/").concat(e))).then((function(e){var a=e.data.article;t.setState({article:a,isLoading:!1})})).catch((function(e){var a=e.response;t.setState({error:a,isLoading:!1})}))}},{key:"componentDidMount",value:function(){this.fetchData()}}]),t}(n.Component),$=a(14),z=a.n($),G=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={users:[]},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:z.a.selectuser},r.a.createElement("p",{className:z.a.text},"Select User:"),r.a.createElement("select",{className:"dropDown",onChange:this.props.handleUserChange},this.state.users.map((function(e){return r.a.createElement("option",{key:e.username,value:e.username},e.username)}))))}},{key:"componentDidMount",value:function(){var e=this;E.a.get("".concat(y,"/users")).then((function(t){var a=t.data.users;e.setState({users:a})}))}}]),t}(n.Component),Q=a(10),X=a.n(Q),Y=function(){return r.a.createElement("nav",null,r.a.createElement("ul",{className:X.a.ul},r.a.createElement("li",{className:X.a.li},r.a.createElement(d.a,{to:"/topics/coding"},"Coding")),r.a.createElement("li",{className:X.a.li},r.a.createElement(d.a,{to:"/topics/football"},"Football")),r.a.createElement("li",{className:X.a.li},r.a.createElement(d.a,{to:"/topics/cooking"},"Cooking")," ")))},Z=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selectedUser:"tickle122",error:{status:404,msg:"Page not found"}},a.handleUserChange=function(e){a.setState({selectedUser:e.target.value})},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(g,{selectedUser:this.state.selectedUser}),r.a.createElement(Y,null),r.a.createElement(G,{handleUserChange:this.handleUserChange}),r.a.createElement("h2",null,"Welcome ",this.state.selectedUser,"!"),r.a.createElement(d.b,null,r.a.createElement(P,{path:"/"}),r.a.createElement(B,{path:"/topics/:topicName"}),r.a.createElement(W,{path:"/authors/:authorName"}),r.a.createElement(R,{path:"/articles/:article_id",selectedUser:this.state.selectedUser}),r.a.createElement(M,{default:!0,msg:this.state.error.msg,status:this.state.error.status})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.29b72127.chunk.js.map